!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("ng-zorro-antd")):"function"==typeof define&&define.amd?define("ne-img-preview",["exports","@angular/core","@angular/common","ng-zorro-antd"],t):t(e["ne-img-preview"]={},e.ng.core,e.ng.common,null)}(this,function(e,t,n,i){"use strict";var o=function(){function e(){}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=t.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),a=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"ne-pop-preview",template:'\n    <div id="galley" viewer>\n      <ul class="pictures">\n        <li *ngFor="let item of imgList" [ngStyle]="{\'width\': snWidth, \'height\': snHeight}">\n          <img src="{{item.url}}" alt="{{item.alt}}">\n        </li>\n      </ul>\n    </div>\n  ',styles:["\n    .pictures {\n        margin: 0;\n        padding: 0;\n        height: 200px;\n        list-style: none;\n    }\n\n    .pictures > li {\n        float: left;\n        width: 150px;\n        height: 150px;\n        margin: 4px;\n        border: 1px solid transparent;\n        overflow: hidden;\n        cursor: zoom-in;\n\n        /* Internet Explorer 10 */\n        display:-ms-flexbox;\n        -ms-flex-pack:center;\n        -ms-flex-align:center;\n\n        /* Firefox */\n        display:-moz-box;\n        -moz-box-pack:center;\n        -moz-box-align:center;\n\n        /* Safari, Opera, and Chrome */\n        display:-webkit-box;\n        -webkit-box-pack:center;\n        -webkit-box-align:center;\n\n    }\n\n    .pictures > li > img {\n        width: 100%;\n        cursor: -webkit-zoom-in;\n    }\n  "]}]}],e.ctorParameters=function(){return[]},e.propDecorators={imgList:[{type:t.Input}],snHeight:[{type:t.Input}],snWidth:[{type:t.Input}]},e}(),s=function(){function e(){this.zoomRatio=1.2,this.isSpinning=!1,this.mouseDown=!1,this.disX=0,this.disY=0,this.nextDeg=0,this.nowImgIndex=0,this.snPageBtnClick=new t.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.nowImgUrl=this.imgList[this.nowImgIndex].url,this.isSpinning=!0,setTimeout(function(){e.setImgSize()},1e3)},e.prototype.onMousedown=function(e){this.mouseDown=!0,e.target==this.imageInstance.nativeElement?(e.preventDefault(),this.focusElement=this.imageInstance.nativeElement,this.disX=e.clientX-this.imageInstance.nativeElement.offsetLeft,this.disY=e.clientY-this.imageInstance.nativeElement.offsetTop,this.imageInstance.nativeElement.setCapture&&this.imageInstance.nativeElement.setCapture.setCapture()):this.mouseDown=!1},e.prototype.onMousemove=function(e){if(this.mouseDown&&this.focusElement==this.imageInstance.nativeElement){var t=e.clientX-this.disX,n=e.clientY-this.disY;this.imageInstance.nativeElement.style.left=t+"px",this.imageInstance.nativeElement.style.top=n+"px"}},e.prototype.onMouseup=function(){this.mouseDown=!1,this.focusElement=null,document.onmousemove=null,document.onmouseup=null,this.imageInstance.nativeElement.releaseCapture&&this.imageInstance.nativeElement.releaseCapture()},e.prototype.mousewheel=function(e){e.target==this.imageInstance.nativeElement&&(e.preventDefault(),0<e.wheelDelta?(console.log(">0",e.wheelDelta),this.zoom()):(console.log("<0",e.wheelDelta),this.zoomOut()),this.imageInstance.nativeElement.setCapture&&this.imageInstance.nativeElement.setCapture.setCapture())},e.prototype.setImgSize=function(){var e=this.container.nativeElement.clientWidth,t=this.container.nativeElement.clientHeight,n=this.imageInstance.nativeElement.naturalWidth,i=this.imageInstance.nativeElement.naturalHeight;if(this.imgRatio=n/i,this.imageInstance.nativeElement.style.top=0,this.imageInstance.nativeElement.className="image",this.imgRatio<e/t){var o=t/i*n;this.imageInstance.nativeElement.style.width=o+"px",this.imageInstance.nativeElement.style.height=t+"px",this.imageInstance.nativeElement.style.left=(e-o)/2+"px"}else{var a=e/n*i;this.imageInstance.nativeElement.style.width=e+"px",this.imageInstance.nativeElement.style.height=a+"px",this.imageInstance.nativeElement.style.top=(t-a)/2+"px"}this.isSpinning=!1},e.prototype.prev=function(){var e=this;0<this.nowImgIndex&&(this.isSpinning=!0,this.nowImgIndex--,this.nowImgUrl=this.imgList[this.nowImgIndex].url,this.snPageBtnClick.emit(this.nowImgIndex),setTimeout(function(){e.setImgSize()},1e3))},e.prototype.next=function(){var e=this;this.nowImgIndex<this.imgList.length-1&&(this.isSpinning=!0,this.nowImgIndex++,this.nowImgUrl=this.imgList[this.nowImgIndex].url,this.snPageBtnClick.emit(this.nowImgIndex),setTimeout(function(){e.setImgSize()},1e3))},e.prototype.zoom=function(){var e=Math.ceil(this.imageInstance.nativeElement.clientWidth*this.zoomRatio),t=Math.ceil(this.imageInstance.nativeElement.clientHeight*this.zoomRatio);this.updateImgSize("zoom",e,t)},e.prototype.zoomOut=function(){var e=Math.ceil(this.imageInstance.nativeElement.clientWidth/this.zoomRatio),t=Math.ceil(this.imageInstance.nativeElement.clientHeight/this.zoomRatio);this.updateImgSize("zoomout",e,t)},e.prototype.rotate=function(){var e=this.imageInstance.nativeElement.className.match(/(rotate)(\d*)/);this.nextDeg=e?(1*e[2]+90)%360:90,this.imageInstance.nativeElement.className="image rotate"+this.nextDeg,this.imageInstance.nativeElement.style.left=(this.container.nativeElement.clientWidth-this.imageInstance.nativeElement.clientWidth)/2+"px",this.imageInstance.nativeElement.style.top=(this.container.nativeElement.clientHeight-this.imageInstance.nativeElement.clientHeight)/2+"px"},e.prototype.updateImgSize=function(e,t,n){var i=this.container.nativeElement.clientWidth,o=this.container.nativeElement.clientHeight;if(this.imageInstance.nativeElement.style.width=t+"px",this.imageInstance.nativeElement.style.height=n+"px",!0<i?t:n)this.imageInstance.nativeElement.style.left=(i-t)/2+"px";else{var a=this.imageInstance.nativeElement.offsetTop+t/10*("zoom"===e?-1:1),s=i-t;0<=a&&(a=0),a<=s&&(a=s),this.imageInstance.nativeElement.style.left=a+"px"}if(!0<o?n:t)this.imageInstance.nativeElement.style.top=(o-n)/2+"px";else{var r=this.imageInstance.nativeElement.offsetLeft+n/10*("zoom"===e?-1:1),l=o-n;0<=r&&(r=0),r<=l&&(r=l),this.imageInstance.nativeElement.style.top=r+"px"}},e.decorators=[{type:t.Component,args:[{selector:"ne-page-preview",template:'<nz-spin [nzSpinning]="isSpinning">\n  <div class="box" [ngStyle]="{\'height\': snHeight}">\n    <div #container class="container">\n      <img #imageInstance class="image rotate0" [src]="nowImgUrl" />\n      <div (click)="prev()" class="pageTurnSpan prev"><i class="anticon anticon-left"></i></div>\n      <div (click)="next()" class="pageTurnSpan next"><i class="anticon anticon-right"></i></div>\n      <div class="tool">\n        <div class="toolct">\n          <span class="oper_bigger" title="放大图片" (click)="zoom()"><i class="anticon anticon-plus-circle-o"></i></span>\n          <span class="oper_smaller" title="缩小图片" (click)="zoomOut()"><i class="anticon anticon-minus-circle-o"></i></span>\n          <span class="oper_rotate" title="向右旋转" (click)="rotate()"><i class="anticon anticon-reload"></i></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</nz-spin>\n',styles:[".box{width:100%;height:400px;border:1px solid rgba(0,0,0,.15);position:relative;overflow:hidden}.box i{position:relative;z-index:99999;display:inline-block}.box .rotate0{transform:rotate(0);-webkit-transform:rotate(0)}.box .rotate90{transform:rotate(90deg);-webkit-transform:rotate(90deg)}.box .rotate180{transform:rotate(180deg);-webkit-transform:rotate(180deg)}.box .rotate270{transform:rotate(270deg);-webkit-transform:rotate(270deg)}.box .container:hover .pageTurnSpan,.box .container:hover .tool{display:block}.box .container{width:100%;height:100%;background:rgba(0,0,0,.1)}.box .container .image{position:absolute;margin:0;padding:0;z-index:999;cursor:move}.box .container .image.active{display:block}.box .container .tool{position:absolute;bottom:4px;width:100%;text-align:center;display:none;z-index:99999}.box .container .toolct{display:inline-block;height:30px;background-color:#6f6965;padding:5px 14px;box-sizing:border-box;border-radius:6px}.box .container .toolct span{margin:0 10px}.box .container .toolct i{display:inline-block;cursor:pointer}.box .container .percentTip{position:absolute;top:0;bottom:0;right:0;left:0;margin:auto;width:100px;height:30px;z-index:9999;text-align:center;line-height:30px;font-size:16px;border-radius:8px;color:#fff;background:linear-gradient(315deg,#4f504e,#151313);background:-o-linear-gradient(left,#4f504e,#151313);background:-webkit-gradient(linear,100% 0,100% 0,from(#4f504e),to(#151313))}.box .container .pageTurnSpan{position:absolute;top:0;bottom:0;right:0;left:0;margin:auto;z-index:99999;display:none;width:30px;height:38px;font-size:30px;line-height:38px;cursor:pointer}.box .container .pageTurnSpan.prev{float:left;margin-left:9px}.box .container .pageTurnSpan.next{float:right;margin-right:9px}.box .container .pageTurnSpan.next.active i,.box .container .pageTurnSpan.prev.active i{display:inline-block}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={imgList:[{type:t.Input}],snHeight:[{type:t.Input}],snPageBtnClick:[{type:t.Output}],container:[{type:t.ViewChild,args:["container"]}],imageInstance:[{type:t.ViewChild,args:["imageInstance"]}],onMousedown:[{type:t.HostListener,args:["mousedown",["$event"]]}],onMousemove:[{type:t.HostListener,args:["mousemove",["$event"]]}],onMouseup:[{type:t.HostListener,args:["window:mouseup"]}],mousewheel:[{type:t.HostListener,args:["mousewheel",["$event"]]}]},e}(),r=function(){function e(e){this._el=e,this.nativeElement=this._el.nativeElement}return e.decorators=[{type:t.Directive,args:[{selector:"[viewer-content]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e}(),l=function(){function e(e,t){this._elementRef=e,this._render=t,this.originalAttr="name",this.nativeElement=this._elementRef.nativeElement}return Object.defineProperty(e.prototype,"_imgContents",{set:function(e){this.imgContents=e,this.renderContent(!0)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.renderContent()},e.prototype.renderContent=function(e){var t=this,n=this.nativeElement;this.content&&(n=this.content.nativeElement),setTimeout(function(){n.getElementsByTagName("img").length&&(t.viewer&&t.viewer.destroy(),t.viewer=new Viewer(t.nativeElement,{url:t.originalAttr}))},500)},e.prototype.ngOnDestroy=function(){this.viewer&&this.viewer.destroy()},e.decorators=[{type:t.Directive,args:[{selector:"[viewer]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]},e.propDecorators={originalAttr:[{type:t.Input}],content:[{type:t.ContentChild,args:["content"]}],_imgContents:[{type:t.ContentChildren,args:[r]}]},e}(),c=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[l,r],exports:[l,r],imports:[n.CommonModule]}]}],e}(),m=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,i.NgZorroAntdModule,c],declarations:[a,s],exports:[a,s]}]}],e}(),p=function g(){};e.NePreviewService=o,e.NePreviewModule=m,e.IMGLIST=p,e.ɵe=s,e.ɵd=a,e.ɵa=r,e.ɵb=l,e.ɵc=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ne-img-preview.umd.min.js.map